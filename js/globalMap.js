const geoCoord = [
  {
    name: "安提瓜和巴布达",
    pos: [298.2, 17],
    cody: "ATG",
    year: 2040,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "澳大利亚",
    pos: [149.08, -35.15],
    cody: "AUS",
    year: 2050,
    status: "承诺",
    jumpUrl: "../html/Australia.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "奥地利",
    pos: [16.22, 48.12],
    cody: "AUT",
    year: 2040,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "巴林",
    pos: [50.3, 26.1],
    cody: "BHR",
    year: 2060,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "巴巴多斯",
    pos: [300.7, 13.05],
    cody: "BRB",
    year: 2030,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "伯利兹",
    pos: [271.7, 17.18],
    cody: "BLZ",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "贝宁",
    pos: [2.42, 6.23],
    cody: "BEN",
    year: 2000,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "不丹",
    pos: [89.45, 27.31],
    cody: "BTN",
    year: 2000,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "巴西",
    pos: [312.45, -15.47],
    cody: "BRA",
    year: 2060,
    status: "在政策文件中",
    jumpUrl: "../html/Brazil.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "柬埔寨",
    pos: [104.55, 11.33],
    cody: "KHM",
    year: 2000,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "加拿大",
    pos: [246.276507, 61.129539],
    cody: "CAN",
    year: 2050,
    status: "在法律上",
    color:'rgba(0,128,128,1)',
  },
  {
    name: "智利",
    pos: [289.6, -33.24],
    cody: "CHL",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "中国",
    pos: [116.2, 39.55],
    cody: "CHN",
    year: 2060,
    status: "在政策文件中",
    jumpUrl: "../html/zhengce.html",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "哥斯达黎加",
    pos: [275.98, 9.55],
    cody: "CRI",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "克罗地亚",
    pos: [15.58, 45.5],
    cody: "HRV",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "丹麦",
    pos: [12.34, 55.41],
    cody: "DNK",
    year: 2050,
    status: "在法律上",
    color:'rgba(0,128,128,1)',
  },
  {
    name: "厄瓜多尔",
    pos: [281.65, -0.15],
    cody: "ECU",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "爱沙尼亚",
    pos: [24.48, 59.22],
    cody: "EST",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "斐济",
    pos: [178.3, -18.06],
    cody: "FJI",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "芬兰",
    pos: [25.03, 60.15],
    cody: "FIN",
    year: 2035,
    status: "在政策文件中",
    jumpUrl: "../html/oumeng.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "法国",
    pos: [2.2, 48.5],
    cody: "FRA",
    year: 2050,
    status: "在法律上",
    jumpUrl: "../html/French.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "德国",
    pos: [13.25, 52.3],
    cody: "DEU",
    year: 2045,
    status: "在法律上",
    jumpUrl: "../html/Germany.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "希腊",
    pos: [23.46, 37.58],
    cody: "GRC",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "几内亚比绍",
    pos: [-15.45, 11.45],
    cody: "GNB",
    year: 2030,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "圭亚那",
    pos: [301.88, 6.5],
    cody: "GUY",
    year: 2019,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "匈牙利",
    pos: [19.05, 47.29],
    cody: "HUN",
    year: 2050,
    status: "在法律上",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "冰岛",
    pos: [-21.57, 64.1],
    cody: "ISL",
    year: 2040,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "印度",
    pos: [77.13, 28.37],
    cody: "IND",
    year: 2070,
    status: "在政策文件中",
    jumpUrl: "../html/India.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "爱尔兰",
    pos: [-6.15, 53.21],
    cody: "IRL",
    year: 2050,
    status: "在法律上",
    color:'rgba(0,128,128,1)',
  },
  {
    name: "以色列",
    pos: [35.12, 31.47],
    cody: "ISR",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "意大利",
    pos: [12.29, 41.54],
    cody: "ITA",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "日本",
    pos: [139.746094, 35.960223],
    cody: "JPN",
    year: 2050,
    status: "在法律上",
    jumpUrl: "../html/Japan.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "哈萨克斯坦",
    pos: [71.3, 51.1],
    cody: "KAZ",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "拉脱维亚",
    pos: [24.08, 56.53],
    cody: "LVA",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "利比里亚",
    pos: [-10.47, 6.18],
    cody: "LBR",
    year: 2000,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "立陶宛",
    pos: [25.19, 54.38],
    cody: "LTU",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "卢森堡",
    pos: [6.09, 49.37],
    cody: "LUX",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "马达加斯加",
    pos: [47.31, -18.55],
    cody: "MDG",
    year: 2010,
    status: "实现",
    color:'rgba(160,82,45,1)',
  },
  {
    name: "马来西亚",
    pos: [101.41, 3.09],
    cody: "MYS",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "马尔代夫",
    pos: [73.28, 4],
    cody: "MDV",
    year: 2030,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "马耳他",
    pos: [14.31, 35.54],
    cody: "MLT",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "马绍尔群岛",
    pos: [171.184158, 7.133938],
    cody: "MHL",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "摩纳哥",
    cody: "MCO",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "尼泊尔",
    pos: [85.2, 27.45],
    cody: "NPL",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "新西兰",
    pos: [174.46, -41.19],
    cody: "NZL",
    year: 2050,
    status: "在法律上",
    jumpUrl: "../html/Newz.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "尼日利亚",
    pos: [7.32, 9.05],
    cody: "NGA",
    year: 2030,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "巴拿马",
    pos: [280.75, 9],
    cody: "PAN",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "丰沙尔",
    cody: "PRT",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "罗马尼亚",
    pos: [26.1, 44.27],
    cody: "ROU",
    year: 2050,
    status: "在法律上",
    color:'rgba(0,128,128,1)',
  },
  {
    name: "俄罗斯",
    pos: [37.35, 55.45],
    cody: "RUS",
    year: 2060,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "沙特阿拉伯",
    pos: [46.42, 24.41],
    cody: "SAU",
    year: 2060,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "新加坡",
    pos: [103.798828, 1.428075],
    cody: "SGP",
    year: 2021,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "斯洛文尼亚",
    pos: [14.33, 46.04],
    cody: "SVN",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "南非",
    pos: [26.125488, -29.094577],
    cody: "ZAF",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "韩国",
    pos: [126.58, 37.31],
    cody: "KOR",
    year: 2050,
    status: "在法律上",
    color:'rgba(0,128,128,1)',
  },
  {
    name: "西班牙",
    pos: [-3.45, 40.25],
    cody: "ESP",
    year: 2050,
    status: "在法律上",
    color:'rgba(0,128,128,1)'
  },
  {
    name: "斯里兰卡",
    pos: [80.700073, 7.89603],
    cody: "LKA",
    year: 2060,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "瑞典",
    pos: [18.03, 59.2],
    cody: "SWE",
    year: 2045,
    status: "在法律上",
    jumpUrl: "../html/Sweden.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "泰国",
    pos: [100.35, 13.45],
    cody: "THA",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "土耳其",
    pos: [32.54, 39.57],
    cody: "TUR",
    year: 2053,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "乌克兰",
    pos: [30.28, 50.3],
    cody: "UKR",
    year: 2060,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "阿联酋",
    pos: [54.22, 24.28],
    cody: "ARE",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
  {
    name: "英国",
    pos: [-0.05, 51.36],
    cody: "GBR",
    year: 2050,
    status: "在法律上",
    jumpUrl: "../html/UK.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "美国",
    pos: [260.994344, 37.574408],
    cody: "USA",
    year: 2050,
    status: "承诺",
    jumpUrl: "../html/US.html",
    color:'rgba(220,20,60,1)',
  },
  {
    name: "乌拉圭",
    pos: [303.89, -34.5],
    cody: "URY",
    year: 2050,
    status: "在政策文件中",
    color:'rgba(30,144,255,1)',
  },
  {
    name: "越南",
    pos: [105.55, 21.05],
    cody: "VNM",
    year: 2050,
    status: "承诺",
    color:'rgba(238,130,238,1)',
  },
];
// geoCoord.forEach((item) => {
//   item.color = getRandomColor();
// });

const data = getLinkData();
// 地图背景
const myChart1 = echarts.init(document.getElementById(`earth_map_3D`));
window.onresize = function () {
  myChart1.resize();
};
// 地图
const geoOption = {
  backgroundColor: `rgba(0,0,0,0)`, //canvas的背景颜色
  globe: {
    baseTexture: "https://p4.ssl.qhimg.com/t011ca4fa634eb14f60.jpg",
    environment: "https://p0.ssl.qhimg.com/t0148869ba0042eaafc.jpg",
    top: `middle`,
    left: `center`,
    // displacementQuality: `high`,
    realisticMaterial: {
      roughness: 0.2,
      metalness: 0,
    },
    displacementScale: 0.05,
    shading: `color`,
    viewControl: {
      autoRotateSpeed: 20,
      distance: 200,
      autoRotate: true,
    },
    light: {
      ambient: {
        intensity: 1,
      },
      main: {
        // 主光源
        intensity: 0,
        shadow: false,
      },
    },
  },
  tooltip: {
    show: true,
    trigger: `item`,
    formatter: function (params) {
      const data = geoCoord[params.dataIndex];

      return `<div style="text-align:center;">${data.name}</div>
            <div style="font-size:18px;text-align:center;color: ${data.color};">${data.status}</div>
            <div style="text-align:center;">${data.year}年</div>
            `;
    },
    textStyle: {
      // colol: `#FFFFFF`,
      lineHeight: 26,
      fontSize: 18,
      width: 200,
    },
    extraCssText: { textAlign: "center" },
    axisPointer: {
      type: `shadow`,
    },
  },
  series: [
    {
      // 点
      type: `scatter3D`,
      blendMode: `lighter`,
      coordinateSystem: `globe`,
      showEffectOn: `render`,
      zlevel: 2,
      effectType: `ripple`,
      // symbolSize: 5,
      rippleEffect: {
        period: 4,
        scale: 4,
        brushType: `fill`,
      },
      emphasis: {
        itemStyle: {
          color: `Darkgrey`,
          opacity: 1,
        },
      },
      hoverAnimation: true,
      itemStyle: {
        normal: {
         color: function (params) {
            return geoCoord[params.dataIndex].color;
        },
      },
    },
      data: data.point,
    },
  ],
};

myChart1.on("click", function (params) {
  const jumpUrl = geoCoord[params.dataIndex].jumpUrl;
  jumpUrl && window.open(geoCoord[params.dataIndex].jumpUrl);
});

myChart1.setOption(geoOption, true);

function getLinkData() {
  const pointData = [];

  geoCoord.forEach((item) => {
    pointData.push(item.pos);
  });

  return {
    point: pointData,
  };
}

// function getRandomColor() {
//   return (
//     "#" +
//     (function (color) {
//       return (color += "0123456789abcdef"[Math.floor(Math.random() * 16)]) &&
//         color.length == 6
//         ? color
//         : arguments.callee(color);
//     })("")
//   );
// }
